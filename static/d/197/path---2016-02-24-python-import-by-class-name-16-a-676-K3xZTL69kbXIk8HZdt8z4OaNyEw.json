{"data":{"site":{"siteMetadata":{"title":"bono's blog","author":"bono"}},"markdownRemark":{"id":"2b8c92ca-3d13-5595-be76-8711a37c8b19","excerpt":"파이썬에서 모듈을 import 할때, 보통 파일 최상단(but, 메서드 내에서 지역적으로 import…","html":"<p>파이썬에서 모듈을 import 할때, 보통 파일 최상단(but, 메서드 내에서 지역적으로 import 가능)에 정의해서 쓰곤 합니다.\n그런데 최근에 작업하면서 여러 클래스를 하나의 메서드에서 처리하면 좋겠다는 부분이 생겼지요.\n그래서 생각한 끝에 클래스 이름만으로 동적으로 import 하는 방법이 있지 않을까하는 궁금증이 생겼습니다.</p>\n<blockquote>\n<p>아마도, 파이썬이라면 가능하다. 아마 누군가 똑같은 고민을 했을 것이다</p>\n</blockquote>\n<p>라는 생각이 들어 한번 찾아 보았습니다.</p>\n<p>검색결과, 역시나,,,, 파이썬,,,,\n동일한 조건의 답을 찾는데 꽤 시간이 걸렸지만 결국에는 딱 맞는 방법을 찾아냈습니다.\n현재 조건을 바탕으로 동적으로 import 하는 방법은 아래와 같습니다.</p>\n<h3>조건</h3>\n<blockquote>\n<p>파일 A, B 가 있고 c 라는 클래스의 이름으로 B 에서 import 해야함\n파일 A 에서 B 의 함수를 호출함, 이때 파라미터로 c 클래스의 이름을 전달\n파일 A 에는 c 클래스를 import 하고 있음</p>\n</blockquote>\n<h3>file A</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> package<span class=\"token punctuation\">.</span>temp <span class=\"token keyword\">import</span> TempClass\n<span class=\"token keyword\">from</span> package <span class=\"token keyword\">import</span> b\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">a_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    module_name <span class=\"token operator\">=</span> TempClass<span class=\"token punctuation\">.</span>__module__       <span class=\"token comment\"># 클래스가 정의된 모듈의 이름(패스)을 불러온다.</span>\n    class_name <span class=\"token operator\">=</span> TempClass<span class=\"token punctuation\">.</span>__name__           <span class=\"token comment\"># 클래스 이름을 string으로 가져온다.</span>\n    b_function<span class=\"token punctuation\">(</span>module_name<span class=\"token punctuation\">,</span> class_name<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>file B</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> importlib          <span class=\"token comment\"># 모듈을 import 할 수 있는 모듈</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">b_function</span><span class=\"token punctuation\">(</span>module_name<span class=\"token punctuation\">,</span> class_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    mod <span class=\"token operator\">=</span> importlib<span class=\"token punctuation\">.</span>import_module<span class=\"token punctuation\">(</span>module_name<span class=\"token punctuation\">)</span>          <span class=\"token comment\"># 모듈을 import하고 모듈을 리턴</span>\n    <span class=\"token keyword\">class</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>mod<span class=\"token punctuation\">,</span> class_name<span class=\"token punctuation\">)</span>          <span class=\"token comment\"># 모듈과 클래스 이름으로 클래스 정보를 가져온다.</span></code></pre></div>\n<p>정리해보면,\n우선 file A 에서 클래스를 import 합니다. 그리고 특수 기능을 가진 private method 인 <strong>module</strong>과 <strong>name</strong>을 이용하여 각각 클래스가 정의된 모듈의 이름과 클래스 이름을 text 로 가져옵니다. 두 개의 값을 b_function 의 파라미터로 전달한 뒤, file B 에서 두 파라미터를 이용하여 importlib 모듈을 통해 import 한뒤 클래스 정보를 가져오게 됩니다.</p>","frontmatter":{"title":"[python] 클래스 이름을 사용한 동적 모듈 import","date":"February 24, 2016"}}},"pageContext":{"slug":"/2016/02/24/python-import-by-class-name/","previous":{"fields":{"slug":"/2016/02/02/django-setting-for-pycharm-community/"},"frontmatter":{"title":"[django] pycharm(파이참) community 버전으로 django(장고) 프로젝트 설정"}},"next":{"fields":{"slug":"/2016/02/28/python-about-set/"},"frontmatter":{"title":"[python] set에 관한 두가지 사실"}}}}