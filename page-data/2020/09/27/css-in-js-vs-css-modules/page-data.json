{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/09/27/css-in-js-vs-css-modules/","result":{"data":{"site":{"siteMetadata":{"title":"bono blog","author":"bono"}},"markdownRemark":{"id":"c7bfe299-4138-5844-8ccf-62fe9b3976fe","excerpt":"지난번 포스팅(CSS-in-JS에서 CSS-in-CSS로 바꿔야 하는 이유)에는 CSS-in-JS에서 CSS-in-CSS 방식으로 변경해야 하는 이유에 대해 설명했다. 요약해보면, 다음과 같다.  성능에 초점을 맞춘다면 , 개발 생산성에 초점을 맞춘…","html":"<p><a href=\"https://dev-bono.github.io/2020/09/14/why-css-in-css/\">지난번 포스팅(CSS-in-JS에서 CSS-in-CSS로 바꿔야 하는 이유)</a>에는 CSS-in-JS에서 CSS-in-CSS 방식으로 변경해야 하는 이유에 대해 설명했다. 요약해보면, 다음과 같다. </p>\n<blockquote>\n<p>성능에 초점을 맞춘다면 <code class=\"language-text\">CSS-in-CSS</code>, 개발 생산성에 초점을 맞춘다면 <code class=\"language-text\">CSS-in-JS</code>를 사용하는 편이 낫다. 어떤 방식이 더 낫다고 단정할 수는 없으며, 서비스의 용도와 목적에 따라 적절한 선택이 필요하다.</p>\n</blockquote>\n<p>지난 포스팅에 이어서 이번에는 두 방식(CSS-in-JS vs CSS-in-CSS)의 성능 차이를 비교해 보고자 한다. CSS-in-JS의 대표로는 <code class=\"language-text\">Styled Components</code>, CSS-in-CSS의 대표로는 <code class=\"language-text\">CSS Modules</code>를 사용한다. 사실, CSS 방식 차이만으로 성능을 비교하는데는 다소 무리가 있다. JS가 평가된 다음 렌더링 될 때 까지, 영향을 끼치는 요소는 다양하다. 예를 들어, 호출 API, 비즈니스 로직, 인터랙션 등이 있다. 하지만, 이 모든 요소를 확인하기는 사실상 어렵다. 그래서 페이지 전환시 CSS 처리 소요시간만을 비교하여 성능을 측정할 생각이다. </p>\n<h2 id=\"프로젝트-구성\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%84%B1\" aria-label=\"프로젝트 구성 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트 구성</h2>\n<p>프로젝트 뼈대는 <code class=\"language-text\">nextjs</code>를 사용하고, 성능 비교 도구로는 크롬 개발자도구의 <code class=\"language-text\">performance 탭</code>을 사용한다. </p>\n<blockquote>\n<p>참고로  nextjs 9.3버전 부터 <code class=\"language-text\">CSS Modules</code> 을 기본으로 채택하고 있다. 이전 버전까지는 <code class=\"language-text\">styled jsx</code>를 기본으로 채택하였다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/68122e12ee74b32f331451d6b2804c8d/de766/0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADtUlEQVQ4y42UW0ybZRjHv8SrXXihJrvaosZjNNkhYmKyJeiFGmM2DzEm2y5M0MyEbeLGVJio47CD4aTOLZsbCWfKxjJGgQIBFATKYT3RA235Smkp0NKD1EEp6+Hn21LdrW/y/548yZvf+3+e530/yWa3YTabsZhNGA16ZiwiTuvR3JtEp9XikGUgSSKREHoYk8m4UCyjhNiR2pZE8i0FCAaC3I88ILgWIxxNCsHqeozVSIT1WJz/tQQsBZVi0Vg6TwQMbOhr2ZhWENE3sCkr2TTqCU7047T0YjHMopuaxzApo9Mt8fdyP9GlZiKeeqIBdcZhAonkFjAyUIL3/W14Dz2F94PtBMr2EmvrwNRayWVbIbev3cZc/wf2OhWquns4hw4SGX2M8NCjrJlOZYAxpER8Czg7XENhzkmKjpWR/1kJnVWfg1KFqesGlzyltNfcwdE6zEJrHwMtkywNFsLAK0S7nyaqLc4A4wKY2OrRrP4uucXXOXGxjZySNu40XoRuJXL7VRQz5fS3/Ymzy4SnU8PIXRPhRRcsFgl3L7IxV/rQ4b/NlE3j2EYakdU3cagVWMeVaPu60Pd24NO3YJxqYmxMwdhoM1MTLbjNt3AbW5jX1RGYV6WmkEIJoFjR2AOaLl1noLyRwZ8UtJX8Rn9lA0PVCm7+XMWP3z/P7mck9u2W2L/nEd7NfoKslySyXpZ4YadExbfPCkqYuChWSltNbPJVeQOv5XfyVlEPH5Z2idjN/m/6OFRwBcfQDjwjEtdKJJ7cLrHnOYnsrG3sEofsfFzil7M7BOT+FjDFi28mqW44x9n2o1xQ5lF66zjnO05Q1vUFP1z9FNtELm5rBZrRKhprK6i9cQ5FUyWtzZdpqK9HM/ydoCxnShbfTZE2fZ2H8vVd9BzYT+/Hb6M6sI+eN1+l5vAbWKcrcDmmcM+pWXQN4/OM4F/Ws+K4QNC8l5DtHTHgUHq4aYfroqE9Z4rxvpeD78hxfDn5eI8cI/hRLqpPDiPPnCfs1xBYHsfjHMIlDwigjoCzkpA1m7B8kETMnwEKmymHPdW/MnX0JNovz6A5VYQmrxB9bgEdBafxe64QXf2dDaHIX4OsLChZC/aLfIxI2MRGUCFujG8LmEymx4LH68XsdGB1zTPjnEvHadmO7HIT9MsEfMKRV592Fg6ZCfmNhFYMQlpCAXv6h/FfySmodcaKc24Ot+zANSuz4HYzoVZjt9kwWM0YbXYsFpkxtXh2zkUM01aMJhvO+SU0GgPr62tp4D+NFdnd5I2bpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test components\"\n        title=\"test components\"\n        src=\"/static/68122e12ee74b32f331451d6b2804c8d/fcda8/0.png\"\n        srcset=\"/static/68122e12ee74b32f331451d6b2804c8d/12f09/0.png 148w,\n/static/68122e12ee74b32f331451d6b2804c8d/e4a3f/0.png 295w,\n/static/68122e12ee74b32f331451d6b2804c8d/fcda8/0.png 590w,\n/static/68122e12ee74b32f331451d6b2804c8d/efc66/0.png 885w,\n/static/68122e12ee74b32f331451d6b2804c8d/c83ae/0.png 1180w,\n/static/68122e12ee74b32f331451d6b2804c8d/de766/0.png 1838w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>주로 flexbox를 활용하여 layout을 생성하였고, 다양한 컬러와 border를 사용하였다. 크게 세 개의 row가 하나의 컨테이너를 구성되고, 각 컨테이너를 15번 반복해서 그린다. </p>\n<p>페이지는 두 개로 구성한다. <code class=\"language-text\">_app.js</code>에는 theme가 추가된다. theme는 색상 값 및 버튼에서 사용하는 variants(style set)를 포함한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">—- pages\n    |-- _app.js\n    |—- index.js     \n    |—- second.js</code></pre></div>\n<p>첫 페이지인 index.js에는 페이지 제목과 <code class=\"language-text\">/second</code> 페이지로 이동하는 링크가 전부다. 여기는 CSS 사용이 거의 없다. 그래서 실제로 CSS 코드가 삽입되지 않는다. <code class=\"language-text\">/second</code> 링크를 클릭해서 실제로 페이지가 이동되는 순간에 대량의 CSS가 삽입된다. 우리는 이 부분의 시간이 얼마나 소요되냐를 측정함으로써 두 방식 간의 성능을 비교하고자 한다.</p>\n<blockquote>\n<p>Styled Components의 ThemeProvider는 사용하기 전에 스타일이 추가되지 않는다. 반면에 CSS Modules를 사용하는 경우, _app.js에서 import한 global CSS는 사용 여부와 관계없이 CSS 코드가 삽입된다. </p>\n</blockquote>\n<h2 id=\"소스-코드-비교\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EC%8A%A4-%EC%BD%94%EB%93%9C-%EB%B9%84%EA%B5%90\" aria-label=\"소스 코드 비교 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소스 코드 비교</h2>\n<p>동일한 화면을 각각 적합한 형태로 구현해 보았다. 사실, 동일한 화면을 만드는데 방법은 무궁무진하다. 내가 만든 코드보다 훨씬 효율적으로 작성할 수도 있다. 하지만, 효율적인 코드를 짜는데 중점을 둔 작업이 아니라 단순히 성능 비교를 위한 목적이기 때문에 이 점은 감안하길 바란다.\n(물론, 효율적으로 코드를 생성하면 성능에 영향을 줄 수도 있지만, 그 차이는 미미할 것이라 판단했다)</p>\n<p><a href=\"https://github.com/blueshw/styled-components-vs-css-modules\">전체 소스코드 확인하기</a></p>\n<h3 id=\"css-in-js\" style=\"position:relative;\"><a href=\"#css-in-js\" aria-label=\"css in js permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS-in-JS</h3>\n<p>CSS-in-JS 방식에서 가장 많이 이용되는 <a href=\"https://styled-components.com/\">Styled Components v5</a>와 Styled System을 기반으로 만들어진 react 기본 구성 요소인 <a href=\"https://rebassjs.org/\">rebass v4</a>를 사용한다.</p>\n<h4 id=\"theme-생성하기\" style=\"position:relative;\"><a href=\"#theme-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"theme 생성하기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>theme 생성하기</h4>\n<p>우선 _app.js에 <code class=\"language-text\">theme</code>을 삽입한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ThemeProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"styled-components\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">KakaopageApp</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">App</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>ThemeProvider theme<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">STYLED_COMPONENT_THEME</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Component <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ThemeProvider<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">STYLED_COMPONENT_THEME</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  colors<span class=\"token operator\">:</span> <span class=\"token constant\">COLORS</span><span class=\"token punctuation\">,</span> \n  buttons<span class=\"token operator\">:</span> <span class=\"token constant\">BUTTONS</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> KakaopageApp<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Layout을 <code class=\"language-text\">ThemeProvider</code>로 감싸고 theme에 <code class=\"language-text\">colors</code>와 <code class=\"language-text\">buttons</code> 같은 스타일 정보 객체를 넣어준다. 이외에도 <code class=\"language-text\">breakpoints</code>, <code class=\"language-text\">fontSizes</code> 등 여러가지 요소를 추가로 사용할 수 있다. 여기서 알아둘 것은, _app.js에 theme를 삽입했다고 해서 CSS 코드가 생성되는 것은 아니다. 어떤 요소에서 theme의 요소를 사용하면 그 요소에 theme의 정보가 추가로 삽입되는 방식이다. </p>\n<h4 id=\"second-페이지-소스코드\" style=\"position:relative;\"><a href=\"#second-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C\" aria-label=\"second 페이지 소스코드 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>second 페이지 소스코드</h4>\n<p>second.js 파일의 jsx 코드는 다음과 같이 생성한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SecondPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token operator\">&lt;</span>StyledThirdRow index<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span> mb<span class=\"token operator\">=</span><span class=\"token string\">\"20px\"</span> sx<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> borderRadius<span class=\"token operator\">:</span> <span class=\"token string\">\"6px\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>StyledFlex<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Button variant<span class=\"token operator\">=</span><span class=\"token string\">\"white_lightGrey1\"</span> sx<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> padding<span class=\"token operator\">:</span> <span class=\"token string\">\"10px\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Text color<span class=\"token operator\">=</span><span class=\"token string\">\"pink\"</span><span class=\"token operator\">></span>Button<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>StyledFlex<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>StyledThirdRow<span class=\"token operator\">></span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> StyledThirdRow <span class=\"token operator\">=</span> <span class=\"token function\">styled</span><span class=\"token punctuation\">(</span>Flex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attrs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> flexDirection<span class=\"token operator\">:</span> <span class=\"token string\">\"column\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n  index<span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  margin-top: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> props<span class=\"token punctuation\">.</span>index <span class=\"token operator\">*</span> <span class=\"token number\">20</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px;\n  padding: 0;\n  background: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span>\n    props<span class=\"token punctuation\">.</span>index <span class=\"token operator\">%</span> <span class=\"token number\">3</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span>\n      <span class=\"token operator\">?</span> <span class=\"token constant\">COLORS</span><span class=\"token punctuation\">.</span>grey3\n      <span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>index <span class=\"token operator\">%</span> <span class=\"token number\">3</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span>\n      <span class=\"token operator\">?</span> <span class=\"token constant\">COLORS</span><span class=\"token punctuation\">.</span>grey4\n      <span class=\"token operator\">:</span> <span class=\"token constant\">COLORS</span><span class=\"token punctuation\">.</span>grey5<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  &amp; > div {\n    box-shadow: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> index <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">%</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">%</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px 5px #44444460</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> StyledFlex <span class=\"token operator\">=</span> <span class=\"token function\">styled</span><span class=\"token punctuation\">(</span>Flex<span class=\"token punctuation\">)</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  margin: 10px;\n  padding: 0px;\n  &amp; > button {\n    margin: 5px;\n    flex: 1 0 auto;\n  }\n  background: rgba(0, 0, 0, 0.3);\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>CSS 코드를 생성하는데 어느 정도 영향이 있는지 확신할 수 없지만, 가급적 실제 프로젝트처럼 다양한 방법으로 스타일 코드를 생성했다. Box, Flex, Button, Text와 같이 rebass에서 제공하는 기본 컴포넌트를 사용했고, <code class=\"language-text\">StyledThirdRow</code>와 같은 커스텀 Component도 만들어 보았다.</p>\n<h3 id=\"css-modules\" style=\"position:relative;\"><a href=\"#css-modules\" aria-label=\"css modules permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS Modules</h3>\n<p>Next JS 9.3부터 CSS Modules를 기본으로 지원하기 때문에 별도로 설치할 패키지는 없다. 다만, sass(SCSS) 문법을 사용하려면, <code class=\"language-text\">sass</code> 패키지를 설치해야 한다. </p>\n<h4 id=\"common-style-추가하기\" style=\"position:relative;\"><a href=\"#common-style-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"common style 추가하기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>common style 추가하기</h4>\n<p>Styled Components에서는 ThemeProvider를 사용하였다. 비슷하게, color와 버튼 variants 스타일을 포함하는 <code class=\"language-text\">common.scss</code>를 만들어 _app.js에 import 하였다. 여기서 <code class=\"language-text\">module</code>을 사용하지 않은 이유는, button 태그와 같은 선택자에 스타일을 적용하기 위함이다. module에 포함된 scss 파일에는 반드시 id 또는 class가 하나 이상 포함되어야 한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"../src/css/common.scss\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">KakaopageApp</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">App</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Component <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> KakaopageApp<span class=\"token punctuation\">;</span></code></pre></div>\n<p>theme에 해당하는 common.scss는 앱 전반적으로 사용하는 global 스타일이기 때문에 module을 빼고 만들었다. 대신, 사용하는 곳에서는 반드시 문자열을 사용해서 스타일을 적용해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token keyword\">@each</span> <span class=\"token selector\"><span class=\"token variable\">$name</span>, <span class=\"token variable\">$value</span> in <span class=\"token variable\">$colors</span> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.bg_<span class=\"token variable\">#{$name}</span> </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$value</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 정의해 둔 스타일은,</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">cn</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">,</span> <span class=\"token string\">\"bg_green\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>위와 같이 <code class=\"language-text\">&quot;bg_green&quot;</code>처럼 문자열을 사용해 가져온다.</p>\n<h4 id=\"second-페이지-소스코드-1\" style=\"position:relative;\"><a href=\"#second-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C-1\" aria-label=\"second 페이지 소스코드 1 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>second 페이지 소스코드</h4>\n<p>second.js의 코드 일부를 확인해보자. 비교를 위해 Styled Components의 코드와 동일한 부분을 가져왔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SecondPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">cn</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>flex<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">third_row_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>number<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">.</span>mb_20<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">cn</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>flex<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">.</span>m_10<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">.</span>p_0<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">.</span>third_wrapper1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">cn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"btn_white_lightGrey1\"</span><span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">.</span>p_10<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">cn</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">,</span> <span class=\"token string\">\"pink\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Button<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">...</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>scss 코드는 아래와 같다. </p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token keyword\">@mixin</span> third_<span class=\"token function\">row</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$index</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$index</span> <span class=\"token operator\">*</span> 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 6px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">flex-direction</span><span class=\"token punctuation\">:</span> column<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">@if</span> <span class=\"token selector\"><span class=\"token variable\">$index</span> % 3 == 0 </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"grey3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">@if</span> <span class=\"token selector\"><span class=\"token variable\">$index</span> % 3 == 1 </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"grey4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">@if</span> <span class=\"token selector\"><span class=\"token variable\">$index</span> % 3 == 2 </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"grey5\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\"><span class=\"token parent important\">&amp;</span> > div </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">box-shadow</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$index</span> <span class=\"token operator\">%</span> 3<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> 4 <span class=\"token operator\">+</span> 2px <span class=\"token punctuation\">(</span><span class=\"token variable\">$index</span> <span class=\"token operator\">%</span> 3<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> 3 <span class=\"token operator\">+</span> 1px 5px #44444460<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">@for</span> <span class=\"token variable\">$i</span> <span class=\"token keyword\">from</span> 1 <span class=\"token keyword\">through</span> <span class=\"token selector\">15 </span><span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.third_row_<span class=\"token variable\">#{$i}</span> </span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">@include</span> third_<span class=\"token function\">row</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.third_wrapper1 </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 0.3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token selector\"><span class=\"token parent important\">&amp;</span> > button </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">flex</span><span class=\"token punctuation\">:</span> 1 0 auto<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"퍼포먼스-비교\" style=\"position:relative;\"><a href=\"#%ED%8D%BC%ED%8F%AC%EB%A8%BC%EC%8A%A4-%EB%B9%84%EA%B5%90\" aria-label=\"퍼포먼스 비교 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>퍼포먼스 비교</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f258110cd1cbe486b8ebb854bb67a7ab/f0293/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC2klEQVQoz5WS3U9TdxjHT4wvM6LbjNsYIuX09Pz6eoBBK5TTF1oKPRULh2lNNHRLFNEFDWNOY5QlIotKtCpYhVKwoAljy7JkGYmJXmo0u5hXZt556c3+iM9+w8Ubr7z45Pe8fJ/n+b0pX/bbfBFsxmhqINDYhJ1NMjZic/ZEH/FIGLfXwG804g9IjCYi8XZpG3i8fnyGQXsyzKlv9nI034sZTaDcX/6JUnmB0tz82vrLyhIPV+/x6MEKhSsTnB4Z5PzpE5w/M8y5U8NcGv+eqeIdCjeL3CzOMFuZZ/X3JX5dWWS6MIEyOHSEycKPFMtTVCol5sq3uHTjOleL05Rmb1OemeL21DUWF2apzN9hrlTk7kKZcmmGe0t3WawscH3mFsMjJ9lv96DYfTaRRIqOdIZo0qLb6iRnx8n1xmgzO2gIxWhoiRBqT9AWS9EaSdAYNGXMZLeZkMQ5kO0iboZxCAPl8JEBtvv2UNvSzzZPhmND5/hr5WceLy2jttgoNR1sqk+xVaT5UOZF2Gar3sVGR4otuoUezvL4jzGGTx5nh9GLUiV6ZLKLj91Z1tV1MnDoMk8WX/Lb9DOqjX1sqO+iSs+wxZVhY303HvNrPvLsZZPazXpZp7cN8HT1Bbn8OFVaGmWz6JdFFtvcsnuNxfHRb/nn1TJ/P6/IiX1yiMVmrYcPJBtUuUMzT5XIsl7WrKtL44nkef3iT/JDP8iTZFGqtRAOfwT/7jR13hh7cjkmCqOMjh2TcZPP9VZq3eE1akQb7uYYu7xv7GpXK56WGGfGDxO1MuzU21H8XkGz/IN+nwefR0fXNKo/reWzT2oQLidu3Yn4n/9sl6a+ja/5TlVqd6I6HGsa+Sjyn313kNagH+H2kepMEo1GEEJH01zv4nrXF26BS3+jV65MTnLxwhhf5Q+hqippyyIYCuF0yulS/L4oyWSSwaND6EIQCgVJJBIEAoG3DTV5Be/T8F8SmrmmS+r7bwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Styled Components performance\"\n        title=\"Styled Components performance\"\n        src=\"/static/f258110cd1cbe486b8ebb854bb67a7ab/fcda8/1.png\"\n        srcset=\"/static/f258110cd1cbe486b8ebb854bb67a7ab/12f09/1.png 148w,\n/static/f258110cd1cbe486b8ebb854bb67a7ab/e4a3f/1.png 295w,\n/static/f258110cd1cbe486b8ebb854bb67a7ab/fcda8/1.png 590w,\n/static/f258110cd1cbe486b8ebb854bb67a7ab/efc66/1.png 885w,\n/static/f258110cd1cbe486b8ebb854bb67a7ab/c83ae/1.png 1180w,\n/static/f258110cd1cbe486b8ebb854bb67a7ab/f0293/1.png 2250w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\" style=\"font-style: italic; margin-top: -20px; margin-bottom: 40px;\">\n  &#60; Styled Components 페이지 전환 &#62;\n</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b9fc03e53e3f7d73cf25cccb1171ad8/8711f/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACuElEQVQoz5WSa08TURCGFw2KNmg0UVEL7W53t7WiFSPQLV3abbfdFiiEFqlXotVIQuIHYzTxEhUVL6BSRVowwSCBgokXEn/g43Y1JH70w5N53zmTmTMnRzibL3ButEhYixA3EkT1XifqsV6sbJqJa8NkrD7bGxjJNCnLYiDXR6RHJxY3iER7GcqluVjM2dpA+PZjk+8/N1leWWNt/SsrazVWVmus1jZY31jn1+ZXZqefM/XoDq+f3efV07t8LL/k80qNpeVVJ9bsuo21ZcrTkwhjY2OUy2UWFyosVCt8Wlzgy/JnKpV5lj6Veflmivm5WV6/mGRhfpa301PMvX/Lh/KsXVtlsfKRuWqV0vUSl88XEEZHzlIsFEhmBombWXpiJrqRQtPttQ2ToYE04WiC7mjSIWKfR+MmZ7QYXZG4Q28ygxbpQWnvQJh6WKJYtDu7U+z1Z2hW0+wPZnFJKdo685TfPWafarHTk6CxLcGBYAa5K4dwJM4u0aThqEF29DKFC1fZKaYR9gb62KNmafSk2SVl2O3L2L6fZmWAgx0Fbi6tsv/EELslC5cvy+HQCMeiV9jelmSPf4AdnhSZ8w8x87ftgSZCkzKMS86xzWOxQ+xzcCmDNjkOncrzpDpNcyBHozdLk9TPwZMFZO2Ss5FLzdHQajE4do9U/hYNbguhRT6D1K6jnjaRTsTwnYw7uP0aYnuE4ZFB2o5pHFHDuFUN73H7rTp0WuRu3AGNFl83XUmL01GTw3IYIRhQ6Agdx69IBAMq7UGVek6VJRSb1laPo+vnap163if+8X/zkteLJHodLVwtlXhwZ5yIFkb1B0gYBrqu4/PJDoqibOkt5H+9LP+hroWZmRmeTj5hfPyGfZtW0pb9TcJhJEnaKvwfBNM0mZiYwO/309nZSSKRIBQKIYri36m+/2r4GxaYrkwMv6QTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CSS Modules performance\"\n        title=\"CSS Modules performance\"\n        src=\"/static/6b9fc03e53e3f7d73cf25cccb1171ad8/fcda8/2.png\"\n        srcset=\"/static/6b9fc03e53e3f7d73cf25cccb1171ad8/12f09/2.png 148w,\n/static/6b9fc03e53e3f7d73cf25cccb1171ad8/e4a3f/2.png 295w,\n/static/6b9fc03e53e3f7d73cf25cccb1171ad8/fcda8/2.png 590w,\n/static/6b9fc03e53e3f7d73cf25cccb1171ad8/efc66/2.png 885w,\n/static/6b9fc03e53e3f7d73cf25cccb1171ad8/c83ae/2.png 1180w,\n/static/6b9fc03e53e3f7d73cf25cccb1171ad8/8711f/2.png 2214w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\" style=\"font-style: italic; margin-top: -20px; margin-bottom: 40px;\">\n  &#60; CSS Modules 페이지 전환 &#62;\n</p>\n<p><code class=\"language-text\">/index</code> 페이지에서 <code class=\"language-text\">/second</code> 페이지로 전환하는 부분을 중점적으로 살펴보자. /index 페이지에서 렌더링 완료된 /second 페이지 사이에 script가 평가되는 노란색 부분이 있다. 이 영역에서 js에 포함된 CSS 코드가 추출되고, HTML 문서에 삽입된다. </p>\n<p>첫 스크린샷은 <code class=\"language-text\">Styled Components</code>에서 확인한 결과다. 첫 번째 페이지 전환 시, <code class=\"language-text\">358ms</code>정도 소요되었다. 그리고 <code class=\"language-text\">/index</code>로 돌아와 다시 <code class=\"language-text\">/second</code>로 이동할 때는 약 <code class=\"language-text\">215ms</code>의 시간이 필요했다. 두 번째 이동 시에는 이미 CSS가 DOM에 삽입되었기 때문에 더 적은 시간만으로 렌더링이 가능하다(그래도 짧지 않은 시간이다).</p>\n<p>두 번째는 CSS Modules에서 확인한 결과다. 첫 번째 페이지 전환 시, <code class=\"language-text\">90.5ms</code>가 소요되었다. Styled Components에 비해서 비약적으로 시간이 줄어들었다. 그리고 두 번째 페이지 전환에서는 조금 줄어든 <code class=\"language-text\">69ms</code> 정도 소요되었다. 당연한 결과다. CSS-in-JS는 js 파일에 CSS 코드를 포함하기 때문에, 페이지 전환 또는 컴포넌트 업데이트 시 js에서 CSS를 추출해야 한다. 반면에, 빌드타임에 CSS 파일이 추출되는 CSS Moduels 방식은 js 평가 과정이 따로 없기 때문에 훨씬 빠르게 페이지가 전환된다. </p>\n<p>또 한가지, Styled Components의 theme은 실제 사용되는 순간(/second로 전환되는 순간) CSS가 생성되기 때문에, 첫 번째 페이지(/index)에서 style은 비어있다. 반면에 CSS Modules의 경우, _app.js에서 import한 <code class=\"language-text\">common.scss</code>는 <code class=\"language-text\">/index</code>가 로드되면 CSS 코드가 삽입된다. 즉, Styled Components가 페이지 전환시 더 많은 CSS 코드를 생성한다는 말과 같다. 하지만, 아무리 그렇다하더라도 위에서 보여준 소요 시간 차이는 확실히 너무 크다.</p>\n<p>이번에는 크롬의 performace 탭에서 CPU 속도를 떨어뜨려서(6x slowdown) 테스트해보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3abbbeae537794159f4fc3b212d456dd/ab387/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWElEQVQoz5XRyU/TURDA8Z83/wMTWulOaaWhFSuVLhirLFELpVBKoYVuWqJGD4IIxKhgwJMJQoyJWyIQFDi0lCIRixgTcAEjHMDEi148+Td8fcBBPHr4ZGbezHt5yUiXLyaJJcPc7o7S3+Gjv9MvotDZSF/Htnohgs/vE04SaD5LU8jDQHczfV3CtSB3uoJ0XzmHt64WKZVJk86kyGSnyc5NMjc3xWz2pTAp6imyIs++SvHk8QOG793g+egjXkxPkEqNCeM7cSYzwfjYUwZudSIF21pIJmOE41Fa4nFC8QTBSHTHdh7aOYsRjUWIJeIiRglHWgm0hQi0hmgMtxBKRKn2nMZiNiNVHy+j1FqK02rGUWIUDHsUYhdcJUVotAbUag0KhQaDXo9TzNothl3mQmxmE0qdEan3ahxXTTtDg0OsTKZYS8+zkV1kPZvj62yOzfklFsbTKK1+6loSlJxo4vylC6y+uc9ablgY4dvyQ3p7utivqkSSmf3kHwnQe3OE3MwC71+v8GnpCx/frvJh8TPryxuMPpthn9yNJ9CD3t5Gov0um4vf2Vr6wda7n/xa/U04MYB0wIVUaLJxyGLH7Xbg95Xj8zoFx65aBw0+J1UVx8jXmrGUlKEvsmKzuWj01tJQU0O9x0PA68V61IlcW4xU5bah02o4bLFgMJqQyRTI5HuI+mC+UsyoUauUaDQqlEoFeXK56O/Kk8tQqXZnpMHr9ViKjZyqqKS83IVWPF5QoEOn20srHtKK3l97+wXC9tn2jFR/xiZ+JrbrcGAyFYlNqv+5+L/+ANTtlxm7l/NdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Styled Components performance(CPU 6x slowdown)\"\n        title=\"Styled Components performance(CPU 6x slowdown)\"\n        src=\"/static/3abbbeae537794159f4fc3b212d456dd/fcda8/3.png\"\n        srcset=\"/static/3abbbeae537794159f4fc3b212d456dd/12f09/3.png 148w,\n/static/3abbbeae537794159f4fc3b212d456dd/e4a3f/3.png 295w,\n/static/3abbbeae537794159f4fc3b212d456dd/fcda8/3.png 590w,\n/static/3abbbeae537794159f4fc3b212d456dd/efc66/3.png 885w,\n/static/3abbbeae537794159f4fc3b212d456dd/c83ae/3.png 1180w,\n/static/3abbbeae537794159f4fc3b212d456dd/ab387/3.png 2812w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\" style=\"font-style: italic; margin-top: -20px; margin-bottom: 40px;\">\n  &#60; Styled Components 페이지 전환 (CPU 6x slowdown) &#62;\n</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a12edab98cd6329833d8dcb1d461e4cd/bff4e/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdUlEQVQoz5WRSU9TYRSGb4SY6MaFC5k6397SQoFyQQIIBcqgKFNBioyBMpTbNkApM0YERTTEsNA4xCiEwShQwMRhYwwbE1f+ARf+k8cvjaJbF0/Oed/3nOTL+aToWISJ8SiTkQi93W0MBPqYXZpjenGWyYUp+gIDjIR6WJlt5Xaki+4OP97mOoZ7G6lv8NLS0sjyTBuTWi9NTS1IL16+Yi92yP7BITHBXmyf3f23Qu+JfpeDdwe82XvN0dG20Dusr6+z9uAWzx6vsLG1w+b2NrHYFptbG6zeW0JqaGxCC4YIDGuMjo4xHh0hOhFmdi7C/M0o0zOjDAaHGAiF6A9paIJQKEhA1HBQIxjW8GtDtPd2UlxUiNRcX0t1WRGVl/Kx2xRsSjqKYsdoVjDJNswWG6ozk1yHQoHTHs8NJgt2q0yq3ixyGTVDITfDIXwr0uqCn+crfvafBPH3D5JV3kmmuwtjgQ+luAN9XivhaIQvHx5y/PERztJOsst9jI6FSdRXU+3t5tun+6wsznPOdhXptPkKUloZ5zMaKK8fIznHx1nLNRL0NSQaakjQXcYbmObz9/fEjg84Y60lo9SPNrKGlFRGRUOEH19/Ep16yil9JdIFYxY620UcLjdqQRXp2cUY0vPRKSp6mxqv+YVl+MRvtl73Ci8Ph5gpLa0h2eLCledmsL2HKk8dKUJL5e4iPO58FKsF1eXEle3EKptPUAQmk5HUVJ0gLe5ZzEYMRr3YETcUWVJKCnqDLj4rLd1Z5u70DXKy7HgqqykpKcEiDv0vsixjtVrj/NGy/LdXFOUkkzq7emj3NZPpsFHh8aCqqniR6ffS//MLCUF9jWDy+8AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CSS Modules performance(CPU 6x slowdown)\"\n        title=\"CSS Modules performance(CPU 6x slowdown)\"\n        src=\"/static/a12edab98cd6329833d8dcb1d461e4cd/fcda8/4.png\"\n        srcset=\"/static/a12edab98cd6329833d8dcb1d461e4cd/12f09/4.png 148w,\n/static/a12edab98cd6329833d8dcb1d461e4cd/e4a3f/4.png 295w,\n/static/a12edab98cd6329833d8dcb1d461e4cd/fcda8/4.png 590w,\n/static/a12edab98cd6329833d8dcb1d461e4cd/efc66/4.png 885w,\n/static/a12edab98cd6329833d8dcb1d461e4cd/c83ae/4.png 1180w,\n/static/a12edab98cd6329833d8dcb1d461e4cd/bff4e/4.png 2660w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p align=\"center\" style=\"font-style: italic; margin-top: -20px; margin-bottom: 40px;\">\n  &#60; CSS Modules 페이지 전환 (CPU 6x slowdown) &#62;\n</p>\n<p>차이는 더 벌어졌다. Styled Components는 페이지 전환에 <code class=\"language-text\">2657ms</code>의 시간이 필요했고, CSS Modules는 <code class=\"language-text\">655ms</code>의 시간이 소요되었다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>이번에는 Styled Components와 CSS Modules 방식의 페이지 전환 시 소요되는 시간을 측정해 보았다. 위에서도 언급했지만, CSS 삽입 시간만 두고 퍼포먼스를 측정하는 데 다소 무리가 있다. API 호출이나 비즈니스로직을 평가하는데도 꽤 오랜 시간이 소요되기 때문이다. 하지만, 그렇다 하더라도 두 방식은 꽤 큰 차이를 보이고 있다. 가볍고 인터랙션이 별로 없는 정적인 서비스를 만든다면 어떤 방식을 선택하더라도 크게 무리는 없다. 다만, 인터랙션이 풍부하거나 페이지 하나가 포함하는 컴포넌트 수가 많은 경우에는 Styled Components와 같은 CSS-in-JS 방식이 아닌, CSS Modules와 같은 <code class=\"language-text\">CSS-in-CSS</code> 방식으로 작업하기를 권장한다.</p>\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<ul>\n<li><a href=\"https://styled-components.com/docs\">Styled Components Docs</a></li>\n<li><a href=\"https://rebassjs.org/\">rebass</a></li>\n<li><a href=\"https://github.com/css-modules/css-modules\">CSS Modules github</a></li>\n<li><a href=\"https://sass-lang.com/\">sass Docs</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%84%B1\">프로젝트 구성</a></li>\n<li>\n<p><a href=\"/2020/09/27/css-in-js-vs-css-modules/#%EC%86%8C%EC%8A%A4-%EC%BD%94%EB%93%9C-%EB%B9%84%EA%B5%90\">소스 코드 비교</a></p>\n<ul>\n<li>\n<p><a href=\"/2020/09/27/css-in-js-vs-css-modules/#css-in-js\">CSS-in-JS</a></p>\n<ul>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#theme-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">theme 생성하기</a></li>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#second-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C\">second 페이지 소스코드</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2020/09/27/css-in-js-vs-css-modules/#css-modules\">CSS Modules</a></p>\n<ul>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#common-style-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">common style 추가하기</a></li>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#second-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C-1\">second 페이지 소스코드</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#%ED%8D%BC%ED%8F%AC%EB%A8%BC%EC%8A%A4-%EB%B9%84%EA%B5%90\">퍼포먼스 비교</a></li>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#%EA%B2%B0%EB%A1%A0\">결론</a></li>\n<li><a href=\"/2020/09/27/css-in-js-vs-css-modules/#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></li>\n</ul>","frontmatter":{"title":"CSS-in-JS(Styled Components) vs CSS-inCSS(CSS Modules) 성능 비교","date":"2020-09-27"}}},"pageContext":{"slug":"/2020/09/27/css-in-js-vs-css-modules/","previous":{"fields":{"slug":"/2020/09/14/why-css-in-css/"},"frontmatter":{"title":"CSS-in-JS에서 CSS-in-CSS로 바꿔야 하는 이유","tags":["CSS","CSS-in-CSS","CSS-in-JS","CSS modules","sass","스타일","web","front-end"]}},"next":{"fields":{"slug":"/2020/10/11/gatsby-blog-to-css-modules/"},"frontmatter":{"title":"gatsby 블로그에 CSS Modules 적용하기","tags":["gatsby","CSS","CSS-in-JS","CSS-in-CSS","CSS Modules"]}}}},"staticQueryHashes":[]}